[
{
	"uri": "//localhost:1313/vi/2-prepareration/1-configure-vpc/",
	"title": "Cấu hình VPC",
	"tags": [],
	"description": "",
	"content": "Cấu hình VPC Ở giao diện AWS console thực hiện Tìm kiếm và chọn VPC Ở giao diện quản lý VPC Chọn Your VPC Chọn Create VPC Xuất hiện bảng cấu hình cho VPC Chọn VPC and more Đặt tên FCJ-Lab Chọn Availability Zones (AZs): 2\nChọn public subnets: 2\nChọn private subnets: 2\nỞ phần VPC endpoint\nChọn None Chọn Create VPC Sau khi tạo xong VPC, chúng ta tiến hành kiểm tra thông tin VPC vừa tạo. Chọn FCJ-Lab-vpc vừa tạo để xem tổng quan Cấu hình Public Subnet Ở giao diện quản lý VPC, ở mục chọn ở bên trái kéo xuống dưới Chọn Subnets Tìm kiếm FCJ-Lab Chúng ta sẽ thấy có 2 subnet public: FCJ-Lab-subnet-public1-ap-southeast-1a, FCJ-Lab-subnet-public2-ap-southeast-1b Đầu tiên chúng ta sẽ setting cho FCJ-Lab-subnet-public1-ap-southeast-1b\nChọn FCJ-Lab-subnet-public1-ap-southeast-1a Chọn Action Chọn Edit subnet settings Xuất hiện bảng cấu hình cho public subnet Click chọn Enable auto-assign public IPv4 address Chọn Save Tương tự, chúng ta sẽ setting cho FCJ-Lab-subnet-public2-ap-southeast-1b Như vậy, chúng ta vừa cấu hình xong VPC và enable public IPv4 cho subnet public.\n"
},
{
	"uri": "//localhost:1313/vi/1-introduction/",
	"title": "Giới thiệu",
	"tags": [],
	"description": "",
	"content": "Giới thiệu Bạn sẽ học cách tích hợp các dịch vụ như Amazon RDS, AWS Lambda, Amazon Cognito, Amazon API Gateway để xây dựng một hệ thống web hoặc ứng dụng serverless (không cần quản lý máy chủ).\nAmazon RDS: Bạn sẽ hiểu cách tạo và quản lý cơ sở dữ liệu quan hệ (MySQL, PostgreSQL, v.v.) trên AWS để lưu trữ dữ liệu. AWS Lambda: Bạn sẽ học cách tạo các hàm Lambda để xử lý logic ứng dụng mà không cần phải quản lý máy chủ. Lambda có thể kết nối với RDS và S3 để thao tác dữ liệu. Amazon Cognito: Bạn sẽ hiểu cách sử dụng Amazon Cognito để xác thực và quản lý người dùng, bảo vệ các API của bạn và xác thực các yêu cầu từ người dùng. API Gateway: Bạn sẽ biết cách cấu hình API Gateway để cung cấp các endpoint HTTP cho phép người dùng hoặc ứng dụng giao tiếp với Lambda, đồng thời bảo vệ API bằng cách sử dụng Cognito cho việc xác thực. Những dịch vụ được sử dụng trong workshop bao gồm: Amazon Relational Database Service (Amazon RDS)\nAmazon Relational Database Service là một dịch vụ quản lý cho phép bạn triển khai và quản lý các cơ sở dữ liệu quan hệ trên AWS. Amazon RDS là loại cơ sở dữ liệu xử lý giao dịch trực tuyến (OLTP). Trường hợp sử dụng chính là cơ sở dữ liệu giao dịch (thay vì cơ sở dữ liệu phân tích). Nó phù hợp nhất với các yêu cầu lưu trữ dữ liệu có cấu trúc và quan hệ. Nó nhằm mục tiêu là một tùy chọn thay thế dễ dàng cho các instance trên nơi làm việc truyền thống của cùng loại cơ sở dữ liệu. Các bản sao lưu tự động và việc vá lỗ được thực hiện trong các khung giờ bảo trì được xác định bởi khách hàng. Việc mở rộng, sao chép và tính sẵn có chỉ cần một nút nhấn. AWS Lambda\nChức năng: Cho phép bạn chạy mã mà không cần quản lý máy chủ. Lambda tự động mở rộng để xử lý hàng nghìn yêu cầu mỗi giây. Mục đích sử dụng: Chạy các chức năng serverless (không cần server), ví dụ như xử lý yêu cầu API, tương tác với cơ sở dữ liệu RDS mà không cần duy trì một máy chủ. Amazon API Gateway\nChức năng: Cung cấp API để kết nối các ứng dụng với các dịch vụ phía sau như Lambda. Mục đích sử dụng: Tạo và quản lý các API RESTful hoặc WebSocket cho phép người dùng hoặc ứng dụng gọi hàm Lambda qua HTTP/HTTPS. API Gateway cung cấp tính năng bảo mật, giám sát và kiểm soát truy cập. Amazon Cognito\nChức năng: Cung cấp dịch vụ xác thực người dùng, quản lý đăng nhập và quyền truy cập cho các ứng dụng di động và web. Mục đích sử dụng: Quản lý người dùng và xác thực người dùng trong ứng dụng, bảo vệ các API bằng cách tích hợp xác thực với API Gateway, đảm bảo chỉ những người dùng đã đăng nhập mới có thể truy cập tài nguyên. Các bước triển khai và cấu hình dịch vụ AWS: Bạn sẽ thực hành tạo các dịch vụ AWS và kết nối chúng lại với nhau, từ đó tạo ra một hệ thống hoàn chỉnh. Bạn sẽ hiểu được quy trình triển khai, từ khi tạo các dịch vụ AWS cho đến khi tích hợp chúng thành một hệ thống hoạt động liền mạch.\nTạo VPC và security group Tạo và cấu hình Amazon RDS cho cơ sở dữ liệu. Tạo EC2 để kết nối và thêm dữ liệu vào RDS instance Xây dựng các hàm Lambda và kết nối với RDS. Tạo API Gateway và tích hợp với Lambda để xử lý các yêu cầu từ người dùng. Tạo pool người dùng và xác thực với Amazon Cognito. Cấu hình bảo mật API Gateway thông qua Cognito, đảm bảo chỉ người dùng xác thực mới có thể gọi API. "
},
{
	"uri": "//localhost:1313/vi/5-configure-cognito/1-create-user-pool/",
	"title": "Tạo User Pool",
	"tags": [],
	"description": "",
	"content": "Tạo DB Subnet Group "
},
{
	"uri": "//localhost:1313/vi/",
	"title": "TRIỂN KHAI API AN TOÀN TRÊN AWS VỚI API GATEWAY, LAMBDA, COGNITO VÀ RDS",
	"tags": [],
	"description": "",
	"content": "TRIỂN KHAI API AN TOÀN TRÊN AWS VỚI API GATEWAY, LAMBDA, COGNITO VÀ RDS Tổng quan Trong workshop này, chúng ta sẽ cùng nhau thực hành việc kết hợp nhiều dịch vụ của AWS để xây dựng một hệ thống hoàn chỉnh, từ việc quản lý người dùng, xử lý dữ liệu đến cung cấp API cho các ứng dụng. Cụ thể, bạn sẽ làm được và hiểu được những điều sau:\nMô hình Triển khai Nội dung: Giới thiệu Các bước chuẩn bị Kết nối RDS Instance Triển khai API Gateway Cấu hình Cognito với API Gateway Kiểm tra hoạt động Dọn dẹp tài nguyên "
},
{
	"uri": "//localhost:1313/vi/3-connect-rds/1-db-subnet-group/",
	"title": "Tạo DB Subnet Group",
	"tags": [],
	"description": "",
	"content": "Tạo DB Subnet Group Ở giao diện AWS console thực hiện\nTìm kiếm từ khóa: RDS Chọn phần: Subnet groups\nChọn: Create DB subnet group Nhập tên: fcj-lab-subnet-group-db\nNhập mô tả: Subnet Group for FCJ Management\nChọn VPC đã được tạo từ trước là FCJ-Lab-vpc Chọn Availability Zones đã được tạo chung với VPC từ trước đó Chọn 2 Subnet private\nKiểm tra lại và chọn Create Hoành thành tạo một Subnet groups "
},
{
	"uri": "//localhost:1313/vi/4-configure-apigateway/1-create-method-api/",
	"title": "Tạo phương thức API",
	"tags": [],
	"description": "",
	"content": "Tạo DB Subnet Group "
},
{
	"uri": "//localhost:1313/vi/2-prepareration/",
	"title": "Các bước chuẩn bị",
	"tags": [],
	"description": "",
	"content": "Chuẩn bị Trong phần này chúng ta sẽ tiến hành cấu hình VPC, Security Group cho RDS database instance, tạo role cho Lamda\nCấu hình VPC Tạo Security Group Tạo Role cho Lambda "
},
{
	"uri": "//localhost:1313/vi/2-prepareration/2-create-security-group/",
	"title": "Create Security Group",
	"tags": [],
	"description": "",
	"content": "Cấu hình Security Group Cấu hình Security Group cho EC2 Instance\nTrong giao diện quản lý VPC, hãy chọn tùy chọn bên trái. Chọn Security Group Chọn Create Security Group Cấu hình cho Security Group Trong phần Basic details Đặt tên cho Security group: FCJ-Lab-sg-public Mô tả Security group: Security group for FCJ Lab VPC: FCJ-Lab-vpc Trong phần Inbound rules Chúng ta sẽ thêm các quy tắc sau: Nhập SSH source Anywhere-IPv4 Nhập HTTP source Anywhere-IPv4 Nhập HTTPS source Anywhere-IPv4 Nhập Custom TCP, port range 3000, source Anywhere-IPv4 Trong phần Outbound Rule, chúng ta sẽ để mặc định Nhấp vào Create security group Cấu hình Security Group cho database instance\nTương tự như bước tạo security group cho EC2 ở trên. Cấu hình cho Security Group DB Trong phần Basic details Tên security group: FCJ-Lab-sg-db Mô tả Security group for RDS database instance VPC FCJ-Lab-vpc Trong phần Inbound Chọn Type MYSQL/Aurora Source chọn FCJ-Lab-sg Trong phần Outbound. Chúng ta để nguyên mặc định Chọn Create security group "
},
{
	"uri": "//localhost:1313/vi/3-connect-rds/2-start-db/",
	"title": "Khởi chạy RDS Instance",
	"tags": [],
	"description": "",
	"content": "Khởi chạy RDS Instance Tạo RDS Instance\nChọn phần: Databases\nChọn: Create Database Chọn phương thức: Standard create\nChọn loại lưu trữ là: MySQL Chọn template: Dev/Test\nChọn Multi-AZ DB instance Phần này chúng ta có thể tự điều chỉnh sao cho phù hợp với yêu cầu để tối ưu hóa chi phí của bạn, tuy nhiên cũng sẽ có một số giới hạn vậy nên cần phải tìm hiểu kỹ. Nhập tên DB instance: fcj-database-instance\nNhập username: admin\nNhập mật khẩu: admin2024 Ở phần cài đặt: Kết nối tới VPC đã tạo: FCJ-Lab-vpc\nchọn Subnet đã tạo từ phần trước: fcj-lab-subnet-group-db\nPuclic access: Yes Chọn Security group đã tạo cho DB: FCJ-Lab-sg-db\nPhần sau có thể để mặc định hoặc cấu hình theo mong muốn Kiểm tra kĩ lại các cấu hình tránh gây nhầm lẫn ảnh hưởng tới chi phí thực hiện\nChọn Create Hoàn tất tạo DB instance và quá trình này phải chờ khoảng 15 phút để hiện Available "
},
{
	"uri": "//localhost:1313/vi/4-configure-apigateway/2-check-api-with-postman/",
	"title": "Kiểm tra API với Postman",
	"tags": [],
	"description": "",
	"content": "Tổng quan RDS "
},
{
	"uri": "//localhost:1313/vi/5-configure-cognito/2-create-group-cognito/",
	"title": "Tạo người dùng và nhóm trong cognito",
	"tags": [],
	"description": "",
	"content": "Tổng quan RDS "
},
{
	"uri": "//localhost:1313/vi/3-connect-rds/",
	"title": "Khởi chạy RDS Instance",
	"tags": [],
	"description": "",
	"content": "Tổng quan Amazon RDS Amazon RDS là cơ sở dữ liệu được quản lý trên AWS, chúng ta chỉ truy cập và quản lý ở mức RDBMS,không thể truy cập và quản lý ở mức hệ điều hành. Bao gồm Aurora, MySQL, PostgreSQL, MSSQL, Oracle, và MariaDB. Amazon RDS cung cấp các tính năng:\nTự động sao lưu (cả log và database – tối đa 35 ngày). Tạo bản sao chỉ đọc (Read Replica) phục vụ cho các workload đọc (reporting). Read Replica có thể được tách ra và chuyển thành một Primary node. Chạy với cơ chế tự động failover, Primary/Standby, hay còn gọi là cơ chế Multi-AZ. RDS thường được sử dụng cho các ứng dụng OLTP. RDS cung cấp tính năng mã hóa dữ liệu at rest và in transit. RDS cũng được bảo vệ bởi tính năng tường lửa giống như EC2 (Security Group và NACL). Thay đổi quy mô (thay đổi instance size). Tự động tăng dung lượng lưu trữ (Storage Auto Scale). Pricing Về cơ bản RDS tính tiền dựa trên các thông số Instance size. Instance size càng lớn cost càng cao. Có hỗ trợ reserve instance tương tự EC2. Lượng data lưu trữ (GB/month) Dung lượng các bản snapshot được tạo ra. Các tính năng khác vd Backtracking đối với Aurora. Mô hình triển khai RDS RDS Có thể được triển khai theo một số mô hình sau\nSingle Instance Single Instance with Multi-AZ option = yes Master – Read Only cluster Master – Read Only cluster with Multi-AZ option = yes Master – Multi Read cluster Single Instance Chỉ có 1 database instance duy nhất được tạo ra trên 1 Availability Zone (AZ). Nếu sự cố xảy ra ở cấp độ AZ, database không thể truy cập.Phù hợp cho môi trường Dev-Test để tiết kiệm chi phí\nSingle Instance with Multi-AZ option enabled\nMột bản sao của instance sẽ được tạo ra ở AZ khác và hoạt động dưới mode standby. Nhiệm vụ của instance standby này là sync data từ master, không thể truy cập instance này. Khi có sự cố, instance standby sẽ được chuyển lên thành master (việc này được AWS thực hiện tự động, endpoint url được giữ nguyên). Nếu enable multi AZ, số tiền bỏ ra sẽ x2. Phù hợp cho Database Production. Master – Read Only cluster\nMột instance với mode ReadOnly sẽ được tạo ra và liên tục replica data từ master instance. Instance này chỉ có thể đọc data. Phù hợp cho hệ thống có workload read \u0026gt; write, muốn tối ưu performance của Database. Sau khi thiết lập quan hệ, instance được tạo ra sẽ kết hợp thành 1 cluster. Trong trạng thái 2 instance đã hình thành cluster, nếu Master instance gặp sự cố, failover sẽ được tự động thực hiện, ReadOnly instance được promote lên làm Master. Nên tạo cluster sau đó mới add node read vào để quản lý connection ở cluster level (số lượng node read có thể tuỳ chọn) Lưu ý: Nếu 2 instance được tạo ra riêng biệt sau đó mới thiết lập quan hệ read-replica, endpoint của 2 instance sẽ riêng biệt nên saukhi failover, cần chỉnh lại connection từ App.\rMaster – Read Only cluster with Multi-AZ option = yes Tương tự mô hình Master – Read Only tuy nhiên các node đều được bật multi-AZ enabled. Chi phí sẽ gấp 4 lần mô hình Single Instance. Nên tạo RDS Cluster hay RDS Instance? AWS cung cấp cơ chế cho phép tạo ra 1 cluster RDS giúp quản lý node và failover dễ dàng hơn. Ưu điểm so với việc tạo RDS instance thông thường:\nQuản lý endpoint ở cấp độ cluster, không bị thay đổi khi instance trong cluster gặp sự cố. Failover tự động. Scale read instance dễ dàng. Nội dung Tạo DB Subnet Group Khởi chạy RDS Instance Tạo EC2 Instance Tạo hàm lamda Khởi chạy RDS Instance "
},
{
	"uri": "//localhost:1313/vi/3-connect-rds/3-launch-ec2/",
	"title": "Tạo EC2 Instance",
	"tags": [],
	"description": "",
	"content": "Tạo EC2 Instance Ở giao diện AWS Console. Tìm kiếm và chọn EC2 Ở giao diện quản lý EC2 Chọn Instance\nChọn Launch Instances Name: FCJ-instance\nChọn hệ điều hành: Ubuntu\nAmazon Machine Image (AMI): Ubuntu Server 24.04 Chọn Create new key pair\nKey pair name: lab-keypair\nChọn Create key pair Instance type: t2.micro\nChọn keypair vừa tạo: lab-keypair Kéo xuống dưới phần cấu hình network settings VPC: FCJ-Lab-vpc Chọn subnet public: FCJ-Lab-subnet-public1-ap-southeast-1a Auto-assign public IP: Enable Chọn Select existing security group: FCJ-Lab-sg-public Kiểm tra lại thông tin ở khung bên phải. Chọn Launch Template Sau khi launch instance. Tiếp đến ta chọn Connect Thực hiện một số câu lệnh để cập nhật thông tin, gói cài đặt ở trong máy\nsudo apt update -y\rsudo apt upgrade -y Cài đặt MySQL Client Để có thể thêm được dữ liệu vào trong RDS, thì cần phải có MySQL Client. Tiến hành cài đặt MySQL Client. sudo apt install mysql-client\nKết nối tới RDS Giờ thì chúng ta sẽ dùng mysql-client đã tải trước đó để kết nối vào trong RDS Instance.\nTrước tiên, vào trong RDS Console\nChọn RDS Instance mà chúng ta đã tạo lúc nãy (fcj-database-instance).\nCopy Endpoint. $mysql -h \u0026ldquo;rds-endpoint\u0026rdquo; -u admin -p\npassword: admin2024 Sau khi kết nối database thành công, chúng ta dán hết scripts vào để thực thi\nSET SQL_MODE = \u0026#34;NO_AUTO_VALUE_ON_ZERO\u0026#34;;\rSTART TRANSACTION;\rSET time_zone = \u0026#34;+00:00\u0026#34;;\r/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\r/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\r/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\r/*!40101 SET NAMES utf8mb4 */;\r--\r-- Create `fcjresbar` database\r--\rCREATE DATABASE IF NOT EXISTS `fcjresbar`;\rUSE `fcjresbar`;\r-- --------------------------------------------------------\r--\r-- Create and define schema of `Categories` table\r--\rDROP TABLE IF EXISTS `Categories`;\rCREATE TABLE IF NOT EXISTS `Categories` (\r`id` int(11) NOT NULL AUTO_INCREMENT,\r`name` varchar(255) NOT NULL,\r`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\r`updatedAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\rPRIMARY KEY (`id`)\r) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;\r--\r-- Insert data into `Categories` table\r--\rINSERT INTO `Categories` (`id`, `name`, `createdAt`, `updatedAt`)\rVALUES\r(1, \u0026#39;CERVEZAS\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;),\r(2, \u0026#39;GASEOSAS\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;),\r(3, \u0026#39;PIZZAS\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;),\r(4, \u0026#39;HAMBURGUESAS\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;),\r(5, \u0026#39;EMPANADAS\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;),\r(6, \u0026#39;LOMITOS\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;, \u0026#39;2021-08-23 05:50:50\u0026#39;);\r-- --------------------------------------------------------\r--\r-- Create and define schema of `Clients` table\r--\rDROP TABLE IF EXISTS `Clients`;\rCREATE TABLE IF NOT EXISTS `Clients` (\r`id` int(11) NOT NULL AUTO_INCREMENT,\r`name` varchar(255) NOT NULL,\r`address` varchar(255) NOT NULL DEFAULT \u0026#39;Address\u0026#39;,\r`phone` varchar(255) NOT NULL DEFAULT \u0026#39;999999999\u0026#39;,\r`email` varchar(255) NOT NULL,\r`dni` varchar(255) NOT NULL,\r`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\r`updatedAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\rPRIMARY KEY (`id`),\rUNIQUE KEY `email` (`email`),\rUNIQUE KEY `dni` (`dni`)\r) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;\r--\r-- Insert data into`Clients` table\r--\rINSERT INTO `Clients` (`id`, `name`, `address`, `phone`, `email`, `dni`, `createdAt`, `updatedAt`)\rVALUES\r(1, \u0026#39;Nguyen Anh Tuan\u0026#39;, \u0026#39;Bien Hoa, Dong Nai\u0026#39;, \u0026#39;0123456789\u0026#39;, \u0026#39;tuna@example.com\u0026#39;, \u0026#39;999999999\u0026#39;, \u0026#39;2024-10-07 05:50:51\u0026#39;, \u0026#39;2024-10-07 21:34:51\u0026#39;),\r(2, \u0026#39;Tu Nhat Phuong\u0026#39;, \u0026#39;Bien Hoa, Dong Nai\u0026#39;, \u0026#39;0143486720\u0026#39;, \u0026#39;fromsunnews@example.com\u0026#39;, \u0026#39;111118291\u0026#39;, \u0026#39;2024-10-07 07:20:30\u0026#39;, \u0026#39;2024-10-07 21:36:51\u0026#39;),\r(3, \u0026#39;Thai Anh Duc\u0026#39;, \u0026#39;Phu My, Ba Ria\u0026#39;, \u0026#39;0324125123\u0026#39;, \u0026#39;duckie@example.com\u0026#39;, \u0026#39;125123145\u0026#39;, \u0026#39;2024-10-07 12:21:22\u0026#39;, \u0026#39;2024-10-07 21:37:12\u0026#39;),\r(4, \u0026#39;Ly Hoang Viet\u0026#39;, \u0026#39;Nhon Trach, Dong Nai\u0026#39;, \u0026#39;0293192412\u0026#39;, \u0026#39;viethoang@example.com\u0026#39;, \u0026#39;090122341\u0026#39;, \u0026#39;2024-10-07 15:11:09\u0026#39;, \u0026#39;2024-10-07 21:40:32\u0026#39;);\r-- --------------------------------------------------------\r--\r-- Create and define schema of `OrderProducts` table\r--\rDROP TABLE IF EXISTS `OrderProducts`;\rCREATE TABLE IF NOT EXISTS `OrderProducts` (\r`id` int(11) NOT NULL AUTO_INCREMENT,\r`quantity` int(11) DEFAULT NULL,\r`orderId` int(11) NOT NULL,\r`productId` int(11) NOT NULL,\rPRIMARY KEY (`id`),\rKEY `orderId` (`orderId`),\rKEY `productId` (`productId`)\r) ENGINE=InnoDB DEFAULT CHARSET=utf8;\r-- --------------------------------------------------------\r--\r-- Insert data into `Orders` table\r--\rDROP TABLE IF EXISTS `Orders`;\rCREATE TABLE IF NOT EXISTS `Orders` (\r`id` int(11) NOT NULL AUTO_INCREMENT,\r`total` double NOT NULL,\r`isPaid` tinyint(1) NOT NULL DEFAULT \u0026#39;0\u0026#39;,\r`delivery` tinyint(1) NOT NULL DEFAULT \u0026#39;0\u0026#39;,\r`note` varchar(255) DEFAULT NULL,\r`userId` int(11) NOT NULL,\r`clientId` int(11) NOT NULL,\r`tableId` int(11) DEFAULT NULL,\r`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\r`updatedAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\rPRIMARY KEY (`id`),\rKEY `userId` (`userId`),\rKEY `clientId` (`clientId`),\rKEY `tableId` (`tableId`)\r) ENGINE=InnoDB DEFAULT CHARSET=utf8;\r-- --------------------------------------------------------\r--\r-- Create and define schema of `Products` table\r--\rDROP TABLE IF EXISTS `Products`;\rCREATE TABLE IF NOT EXISTS `Products` (\r`id` int(11) NOT NULL AUTO_INCREMENT,\r`name` varchar(255) NOT NULL,\r`price` double NOT NULL,\r`stock` int(11) NOT NULL,\r`categoryId` int(11) NOT NULL,\r`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\r`updatedAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\rPRIMARY KEY (`id`),\rKEY `categoryId` (`categoryId`)\r) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;\r--\r-- Insert data into `Products` table\r--\rINSERT INTO `Products` (`id`, `name`, `price`, `stock`, `categoryId`, `createdAt`, `updatedAt`)\rVALUES\r(1, \u0026#39;HAMBRUGUESA CHICA\u0026#39;, 120, 50, 4, \u0026#39;2024-10-07 05:50:51\u0026#39;, \u0026#39;2024-10-07 05:50:51\u0026#39;),\r(2, \u0026#39;HAMBRUGUESA GRANDE\u0026#39;, 180, 70, 4, \u0026#39;2024-10-07 05:50:52\u0026#39;, \u0026#39;2024-10-07 05:50:55\u0026#39;),\r(3, \u0026#39;COCA COLA 3LTS\u0026#39;, 180, 70, 2, \u0026#39;2024-10-07 05:50:53\u0026#39;, \u0026#39;2024-10-07 05:50:56\u0026#39;),\r(4, \u0026#39;COCA COLA 1.5LTS\u0026#39;, 180, 70, 2, \u0026#39;2024-10-07 05:50:54\u0026#39;, \u0026#39;2024-10-07 05:50:57\u0026#39;);\r-- --------------------------------------------------------\r--\r-- Create and define schema of `SequelizeMeta` table\r--\rDROP TABLE IF EXISTS `SequelizeMeta`;\rCREATE TABLE IF NOT EXISTS `SequelizeMeta` (\r`name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,\rPRIMARY KEY (`name`),\rUNIQUE KEY `name` (`name`)\r) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;\r--\r-- Insert data into `SequelizeMeta` table\r--\rINSERT INTO `SequelizeMeta` (`name`)\rVALUES\r(\u0026#39;20210408050330-create-table.js\u0026#39;),\r(\u0026#39;20210408051244-create-client.js\u0026#39;),\r(\u0026#39;20210408052326-create-user.js\u0026#39;),\r(\u0026#39;20210408064209-create-category.js\u0026#39;),\r(\u0026#39;20210408064602-create-product.js\u0026#39;),\r(\u0026#39;20210408070645-create-order.js\u0026#39;),\r(\u0026#39;20210408071614-create-order-product.js\u0026#39;);\r-- --------------------------------------------------------\r--\r-- Create and define schema of `Tables` table\r--\rDROP TABLE IF EXISTS `Tables`;\rCREATE TABLE IF NOT EXISTS `Tables` (\r`id` int(11) NOT NULL AUTO_INCREMENT,\r`name` varchar(255) DEFAULT NULL,\r`occupied` tinyint(1) DEFAULT \u0026#39;0\u0026#39;,\r`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\r`updatedAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\rPRIMARY KEY (`id`)\r) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;\r--\r-- Insert data into `Tables`\r--\rINSERT INTO `Tables` (`id`, `name`, `occupied`, `createdAt`, `updatedAt`)\rVALUES\r(1, \u0026#39;PATIO 1\u0026#39;, 0, \u0026#39;2024-10-07 05:50:50\u0026#39;, \u0026#39;2024-10-07 05:50:50\u0026#39;),\r(2, \u0026#39;PATIO 2\u0026#39;, 0, \u0026#39;2024-10-07 05:50:50\u0026#39;, \u0026#39;2024-10-07 05:50:50\u0026#39;),\r(3, \u0026#39;PATIO 3\u0026#39;, 0, \u0026#39;2024-10-07 05:50:50\u0026#39;, \u0026#39;2024-10-07 05:50:50\u0026#39;),\r(4, \u0026#39;INTERIOR 1\u0026#39;, 0, \u0026#39;2024-10-07 05:50:50\u0026#39;, \u0026#39;2024-10-07 05:50:50\u0026#39;),\r(5, \u0026#39;INTERIOR 2\u0026#39;, 0, \u0026#39;2024-10-07 05:50:50\u0026#39;, \u0026#39;2024-10-07 05:50:50\u0026#39;),\r(6, \u0026#39;BARRA 1\u0026#39;, 0, \u0026#39;2024-10-07 05:50:50\u0026#39;, \u0026#39;2024-10-07 05:50:50\u0026#39;);\r-- --------------------------------------------------------\r--\r-- Create and define schema of `Users` table\r--\rDROP TABLE IF EXISTS `Users`;\rCREATE TABLE IF NOT EXISTS `Users` (\r`id` int(11) NOT NULL AUTO_INCREMENT,\r`name` varchar(255) NOT NULL,\r`email` varchar(255) NOT NULL,\r`password` varchar(255) NOT NULL,\r`image` varchar(255) NOT NULL DEFAULT \u0026#39;/avatar.png\u0026#39;,\r`isAdmin` tinyint(1) NOT NULL DEFAULT \u0026#39;0\u0026#39;,\r`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\r`updatedAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\rPRIMARY KEY (`id`),\rUNIQUE KEY `email` (`email`)\r) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;\r--\r-- Insert data into `Users` table\r--\rINSERT INTO `Users` (`id`, `name`, `email`, `password`, `image`, `isAdmin`, `createdAt`, `updatedAt`)\rVALUES\r(1, \u0026#39;Admin\u0026#39;, \u0026#39;admin@example.com\u0026#39;, \u0026#39;$2b$10$Ob28q7LgYBCadB0mgVnPD.u8WtBVVoWs28iZTrxFF8LWuwG7xWiuO\u0026#39;, \u0026#39;/avatar.png\u0026#39;, 1, \u0026#39;2024-10-05 05:50:50\u0026#39;, \u0026#39;2024-10-05 05:50:50\u0026#39;),\r(2, \u0026#39;User\u0026#39;, \u0026#39;user@example.com\u0026#39;, \u0026#39;$2b$10$Ob28q7LgYBCadB0mgVnPD.u8WtBVVoWs28iZTrxFF8LWuwG7xWiuO\u0026#39;, \u0026#39;/avatar.png\u0026#39;, 0, \u0026#39;2024-10-05 05:50:50\u0026#39;, \u0026#39;2024-10-05 05:50:50\u0026#39;);\r--\r-- Add some restriction\r--\r--\r-- Update constraint for `OrderProducts` table\r--\rALTER TABLE `OrderProducts`\rADD CONSTRAINT `orderproducts_ibfk_1` FOREIGN KEY (`orderId`) REFERENCES `Orders` (`id`) ON DELETE CASCADE,\rADD CONSTRAINT `orderproducts_ibfk_2` FOREIGN KEY (`productId`) REFERENCES `Products` (`id`) ON DELETE CASCADE;\r--\r-- Update constraint for `Orders` table\r--\rALTER TABLE `Orders`\rADD CONSTRAINT `orders_ibfk_1` FOREIGN KEY (`userId`) REFERENCES `Users` (`id`) ON DELETE CASCADE,\rADD CONSTRAINT `orders_ibfk_2` FOREIGN KEY (`clientId`) REFERENCES `Clients` (`id`) ON DELETE CASCADE,\rADD CONSTRAINT `orders_ibfk_3` FOREIGN KEY (`tableId`) REFERENCES `Tables` (`id`) ON DELETE CASCADE;\r--\r-- Update constraint for `Products` table\r--\rALTER TABLE `Products`\rADD CONSTRAINT `products_ibfk_1` FOREIGN KEY (`categoryId`) REFERENCES `Categories` (`id`) ON DELETE CASCADE;\rCOMMIT;\r/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\r/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\r/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; Kiểm tra kết quả Kiểm tra database: SHOW DATABASES; "
},
{
	"uri": "//localhost:1313/vi/2-prepareration/3-create-role/",
	"title": "Tạo Role cho Lambda",
	"tags": [],
	"description": "",
	"content": "Tạo Role cho Lambda Ở giao diện Console:\nTìm kiếm từ khóa: IAM Chọn Create Role Thông tin điền vào:\nChọn loại sử dụng: AWS service Dịch vụ: Lambda Chọn Next Tìm kiếm từ khóa tương ứng chọn các permission sau: Chọn AmazonRDSFullAccess Chọn AmazonEC2FullAccess Chọn AWSLambdaVPCAccessExecutionRole Chọn AmazonVPCFullAccess Nhập tên role: RoleLambdatochangedataRDS Kiểm tra kỹ lại và chọn Create role "
},
{
	"uri": "//localhost:1313/vi/4-configure-apigateway/",
	"title": "Cấu hình API Gateway",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/3-connect-rds/4-create-lambda-function/",
	"title": "Khởi tạo hàm lambda",
	"tags": [],
	"description": "",
	"content": "Khởi tạo hàm lambda Ở giao diện AWS Console. Tìm kiếm và chọn Lambda Tạo lambda function Ở phần Create function Chọn Author from scratch\nỞ phần Basic information - Function name: ChangeDataRDS - Runtime: Node.js 20.x Chọn Role: RoleLambdatochangedataRDS Tích chọn Enble VPC Chọn các thông tin đã khởi tạo từ trước: VPC FCJ-Lab-vpc Chọn subnet public: FCJ-Lab-subnet-private2-ap-southeast-1b \u0026amp; FCJ-Lab-subnet-private1-ap-southeast-1a Chọn Select existing security group Chọn FCJ-Lab-sg-public \u0026amp; FCJ-Lab-sg-db Sau khi thiết lập, cuối cùng chọn Create Download file Lambda function với chức năng: Thêm mới user \u0026amp; Xóa user trong database. Tải xuống file .zip chứa lambda function. Lambda Function\rChangeDataRDS.zip\r(534 KB)\rChọn Upload form Chọn Upload Chọn file Zip tại đây Upload file .zip thành công Tại tab Configuration trong lambda Chọn Environment variables Nhấn Edit Chọn Add environment variable: RDS_LAMBDA_HOSTNAME: endpoint_your_rds_instance\rRDS_LAMBDA_USERNAME: admin\rRDS_LAMBDA_PASSWORD: admin2024\rRDS_LAMBDA_PORT: 3306\rJWT_SECRET: 0bac010eca699c25c8f62ba86e319c2305beb94641b859c32518cb854addb5f4 Chọn Save để lưu biến môi trường. "
},
{
	"uri": "//localhost:1313/vi/5-configure-cognito/",
	"title": "Cấu hình Cognito",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/3-connect-rds/5-connect-lambda-rds/",
	"title": "Kết nối Lambda với RDS Instance",
	"tags": [],
	"description": "",
	"content": "Kết nối Lambda với RDS Instance Tại tab Configuration Chọn RDS databases Chọn Connect to RDS database Bên trong RDS database Chọn Use an exiting database Chọn RDS instance: fcj-database-instance Sau đó chọn Create Test event action: Create new event Event name: CREATE_USER Event JSON:\n{\r\u0026#34;method\u0026#34;: \u0026#34;POST\u0026#34;,\r\u0026#34;name\u0026#34;: \u0026#34;John Doe\u0026#34;,\r\u0026#34;email\u0026#34;: \u0026#34;johndoe@example.com\u0026#34;,\r\u0026#34;password\u0026#34;: \u0026#34;hashedpassword123\u0026#34;,\r\u0026#34;image\u0026#34;: \u0026#34;/avatar.png\u0026#34;,\r\u0026#34;isAdmin\u0026#34;: 1,\r\u0026#34;createdAt\u0026#34;: \u0026#34;2024-06-05 05:50\u0026#34;,\r\u0026#34;updatedAt\u0026#34;: \u0026#34;2024-10-05 05:50\u0026#34;\r} Sau khi test CREATE_USERS Kiểm tra lại bằng EC2 "
},
{
	"uri": "//localhost:1313/vi/6-testing/",
	"title": "Kiểm tra Kết quả",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/7-clean-up/",
	"title": "Dọn dẹp tài nguyên",
	"tags": [],
	"description": "",
	"content": "Chúng ta sẽ dọn dẹp tài nguyên theo thứ tự như sau:\nVào API Gateway xóa tài nguyên đã tạo\nVào Cognito xóa tài nguyên đã tạo\nChọn Delete Cognito domain Chọn Deactivate deletion protection Vào Lambda xóa hàm đã tạo.\nTự động các Network interfaces phát sinh cũng sẽ xóa theo. Kiểm tra lại, nếu còn liên quan đến resource thì xóa, tránh phát sinh chi phí. Vào dịch vụ Amazon RDS\nMở bảng điều khiển Amazon RDS.\nTrong ngăn dẫn hướng, chọn Subnet groups.\nChọn DB subnet group liên quan bài lab.\nChọn Delete, sau đó chọn Delete trong cửa sổ xác nhận.\nChọn RDS instance đã khởi tạo\nVào Modify. Lướt xuống cùng bỏ tích Enable deletion protection\nChọn Action chọn delete\nBỏ tích Create final snapshot\nBỏ tích Retain automated backups\nĐợi vài phút để xóa\nSau khi xóa db instance, kiểm tra các bản Snapshot, Automated Backup (nếu có hãy xóa nếu không cần thiết để tránh phát sinh chi phí)\nTrong phần subnet group. Xóa subnet group liên quan đến VPC đã tạo.\nTerminate EC2 instance\nTruy cập EC2 Management Console.\nTrên thanh điều hướng bên trái, chọn Instances.\nChọn tất cả EC2 Instance liên quan tới bài lab.\nClick Actions.\nClick Manage Instance State.\nChọn Terminate.\nMở bảng điều khiển Amazon EC2.\nChọn Amazon EC2 Dashboard, sau đó chọn Elastic IPs.\nChọn Elastic IP address liên quan bài lab.\nTừ Actions, chọn Release Elastic IP addresses.\nTrên trang xác nhận, hãy chọn Release.\nVào phần Network interfaces\nKiểm tra còn xót Network interfaces còn liên quan đến bài\nĐể xóa VPC và các tài nguyên liên quan:\nTruy cập endpoint, xóa tài nguyên đã phát sinh trong quá trình thực hành, endpoint chứa VPC đã tạo.\nMở bảng điều khiển Amazon VPC.\nXóa VPC.\nChọn Bảng điều khiển VPC, sau đó chọn VPC.\nChọn VPC bạn muốn xóa.\nTừ Actions, chọn Delete VPC.\nTrên trang xác nhận, hãy nhập delete, rồi chọn Delete.\nMở bảng điều khiển Amazon VPC.\nChọn VPC Dashboard, sau đó chọn Security Groups.\nKiểm tra các security group còn xót sau khi đã xóa VPC\nChọn security group liên quan bài lab.\nChọn Actions, chọn Delete security groups và sau đó chọn Delete để xác nhận.\n"
},
{
	"uri": "//localhost:1313/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]